(()=>{const e=e=>document.getElementById(e),t=e=>document.createElement(e);window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()});var a="aw-content-hider",o=".aw-card{background:#0d0d10;border:1px solid #1e1e24;color:#f5f7fb;border-radius:16px;padding:24px;text-align:center;font-family:system-ui,sans-serif;box-shadow:0 10px 30px rgba(0,0,0,.5)}.aw-btn{display:inline-flex;justify-content:center;align-items:center;min-height:48px;padding:10px 24px;border-radius:12px;font-weight:700;cursor:pointer;border:0;transition:.2s;font-size:16px;font-family:system-ui,sans-serif}.aw-btn:hover{transform:translateY(-1px)}.aw-title{margin:0 0 16px;font-size:24px;font-weight:700;color:#fff}.aw-desc{margin:0 0 24px;color:#c8cbd4;line-height:1.6;font-size:16px}";try{var r="body>*:not(.aw-gate-overlay){display:none!important}body{overflow:hidden!important;background:#000!important}"+o+".aw-gate-overlay{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000;z-index:2147483647;display:flex;justify-content:center;align-items:center;padding:24px;box-sizing:border-box}.aw-gate-card{max-width:500px;width:100%}.aw-error-card{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2147483647;max-width:320px;width:90%}.aw-gate-logo{display:block;margin:0 auto 20px;max-width:150px;height:auto}.aw-gate-buttons{display:flex;justify-content:center;gap:12px;margin-top:16px;flex-wrap:wrap}.aw-btn-no{background:#2a2a32;color:#cdd0d7}.aw-btn-no:hover{background:#3a3a44}.aw-btn-yes{background:#6a1b9a;color:#fff;box-shadow:0 6px 15px rgba(106,27,154,.25)}.aw-btn-yes:hover{background:#5a1784}.aw-error{margin-top:16px;color:#ff4d4f;font-size:14px;display:none}.aw-disclaimer{margin-top:20px;font-size:12px;color:#666}.aw-disclaimer a{color:#666;text-decoration:underline}",i=t("style");i.id=a,i.type="text/css",i.styleSheet?i.styleSheet.cssText=r:i.appendChild(document.createTextNode(r)),document.head.appendChild(i)}catch(e){}const n=()=>{var r=document.currentScript;if(!r)for(var i=document.getElementsByTagName("script"),n=0;n<i.length;n++)if(i[n].hasAttribute("data-client-id")){r=i[n];break}if(!r)return void v("Configuration Error","Could not locate AgeWallet configuration.");var d=r.getAttribute("data-client-id");if(!d)return void v("Configuration Error","Missing Client ID.");var c="aw_session_"+d,l=r.getAttribute("data-logo")||"https://www.agewallet.com/wp-content/uploads/2025/07/age-wallet-logo-light-tmb2-cleaned-300x225.png",s=r.getAttribute("data-css"),g=r.getAttribute("data-title")||"Age Verification",w=r.getAttribute("data-description")||"You must verify your age to view this content.",p=r.getAttribute("data-yes-label")||"Verify with AgeWallet",f=r.getAttribute("data-no-label")||"I Disagree",m=r.getAttribute("data-error-msg")||"Sorry, you do not meet the minimum requirements.",u=parseInt(r.getAttribute("data-expiry")||"1440",10);const h=e=>{try{for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4;)e+="=";return JSON.parse(atob(e))}catch(e){return null}},y=(e,t,a)=>{var o="";if(a){var r=new Date;r.setTime(r.getTime()+60*a*1e3),o="; expires="+r.toUTCString()}document.cookie=e+"="+(encodeURIComponent(t)||"")+o+"; path=/; SameSite=Lax"},b=e=>Array.from(crypto.getRandomValues(new Uint8Array(e)),e=>e.toString(16).padStart(2,"0")).join("");function v(r,i){if(!e(a)){var n=t("style");n.id=a,n.innerHTML="body>*:not(.aw-gate-overlay){display:none!important}body{overflow:hidden!important;background:#000!important}"+o+".aw-error-card{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2147483647;width:90%;max-width:320px}.aw-btn-no{background:#2a2a32;color:#cdd0d7}",document.head.appendChild(n)}var d=t("div");d.className="aw-card aw-error-card",d.innerHTML='<div class="aw-title aw-error-title" style="color:#ff4d4f">'+r+'</div><div class="aw-desc aw-error-desc">'+i+'</div><button class="aw-btn aw-btn-no" onclick="window.location.reload()">Reload Page</button>',document.body.appendChild(d)}function x(){var e=(new Date).getTime()+60*u*1e3,t=JSON.stringify({v:1,e:e});((e,t,a)=>{try{localStorage.setItem(e,t)}catch(e){}y(e,t,a)})(c,t,u)}var S,k=window.__awParams||window.location.search,C=new URLSearchParams(k);if(C.has("code")&&C.has("state"))!async function(e,a){var o;(o=t("div")).className="aw-gate-overlay",o.innerHTML='<div class="aw-card aw-gate-card"><img src="'+l+'" class="aw-gate-logo" alt="Logo"><h1 class="aw-title aw-gate-title">Verifying...</h1><div style="border:4px solid rgba(255,255,255,.1);border-left-color:#6a1b9a;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:20px auto"></div><style>@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}</style></div>',document.body.appendChild(o);var r=h(a);if(r&&r.v){var i=r.v,n=r.r?window.location.origin+r.r:"/",c=window.location.origin;try{var s=await fetch("https://app.agewallet.io/embed/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:d,code:e,code_verifier:i,redirect_uri:c})}),g=await s.json();if(g.error)throw new Error(g.error_description||g.error);var w=await fetch("https://app.agewallet.io/user/userinfo",{headers:{Authorization:"Bearer "+g.access_token}});!0===(await w.json()).age_verified?(x(),window.location.href=n):v("Verification Failed","Age requirement not met.")}catch(e){v("Verification Error",e.message||"Token exchange failed.")}}else v("Verification Error","Invalid state parameter.")}(C.get("code"),C.get("state"));else if(C.has("error")){var _=C.get("error"),A=C.get("error_description")||_;if("access_denied"===_&&"Region does not require verification"===A){var T=C.get("state"),E=T?h(T):null,I=E&&E.r?window.location.origin+E.r:"/";x(),window.location.href=I}else v("Verification Error",decodeURIComponent(A))}else if(function(){var e=null;try{e=JSON.parse(localStorage.getItem(c))}catch(e){}if(!e){var t=document.cookie.match(new RegExp("(^| )"+c+"=([^;]+)"));if(t)try{e=JSON.parse(decodeURIComponent(t[2]))}catch(e){}}if(e&&e.v){if((new Date).getTime()<e.e)return e;localStorage.removeItem(c),y(c,"",-1)}return null}())!function(){e(a)&&e(a).remove();var t=document.querySelector(".aw-gate-overlay");t&&t.remove(),document.body.style.overflow="",document.body.style.backgroundColor=""}();else{if(s){var L=t("link");L.rel="stylesheet",L.href=s,document.head.appendChild(L)}(S=t("div")).className="aw-gate-overlay",S.innerHTML='<div class="aw-card aw-gate-card"><img src="'+l+'" class="aw-gate-logo" alt="Logo"><h1 class="aw-title aw-gate-title">'+g+'</h1><div class="aw-desc aw-gate-desc">'+w+'</div><div class="aw-gate-buttons"><button class="aw-btn aw-btn-no" id="aw-deny">'+f+'</button><button class="aw-btn aw-btn-yes" id="aw-verify">'+p+'</button></div><div class="aw-error" id="aw-error-msg">'+m+'</div><p class="aw-disclaimer">By proceeding you agree to allow <a href="https://agewallet.com" target="_blank">AgeWalletâ„¢</a> to verify your age.</p></div>',document.body.appendChild(S),e("aw-deny").onclick=()=>{e("aw-error-msg").style.display="block"},e("aw-verify").onclick=()=>async function(){var e,t=b(32),a=b(16),o=await(async e=>btoa(String.fromCharCode(...new Uint8Array(await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e))))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""))(t),r=(e={v:t,r:window.location.pathname+window.location.search},btoa(JSON.stringify(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")),i=window.location.origin,n="https://app.agewallet.io/user/authorize?response_type=code&client_id="+encodeURIComponent(d)+"&redirect_uri="+encodeURIComponent(i)+"&scope=openid&state="+r+"&nonce="+a+"&code_challenge="+o+"&code_challenge_method=S256";window.location.href=n}()}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()})();